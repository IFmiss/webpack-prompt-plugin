"use strict";var o=require("fs");var t=require("chalk"),n="webpack-prompt-plugin",i=require("ip"),e=function(e){this.isWatch=!1,this.isStarted=!1,this.option={ip:!0,tips:[]},this.getIP=function(){return i.address()},this.printIP=function(o){if(this.option.ip){var n=o.host?"0.0.0.0"===o.host?this.getIP():o.host:"localhost",i=o.port||80,e="http://"+n+":"+i+"/";console.log("\n"),console.log(t.bgGreen.black(" done "),t.green("App is runing!")),console.log("\n"),console.log("- Local:  ",t.underline.blue("http://localhost:"+i+"/")),console.log("- Network:",t.underline.blue(e)),console.log("\n")}},this.printProjectInfo=function(){var n,i=(n=o.readFileSync("package.json"),JSON.parse(n));console.log("name: ",t.underline.green(i.name),"   version: ",t.underline.green(i.version)),console.log("\n")},this.printHandler=function(o){var t=this;o.hooks?o.hooks.done.tap(n,(function(){t.isStarted||(t.isStarted=!0,t.option.ip&&t.isWatch&&o.options.devServer&&t.printIP(o.options.devServer),t.printProjectInfo(),t.printCustom())})):o.plugin("done",(function(n){t.isStarted||(t.isStarted=!0,t.option.ip&&t.isWatch&&o.options.devServer&&t.printIP(o.options.devServer),t.printProjectInfo(),t.printCustom())}))},this.printCustom=function(){this.option.tips&&this.option.tips.length&&this.option.tips.forEach((function(o){var i=o.color?o.color:"green";"object"==typeof o?console.log(t[i](o.name||"hello "+n)):console.log(t.green(o||"hello "+n))}))},this.initHandler=function(o){var i=this;o.hooks?(o.hooks.watchRun.tap(n,(function(){i.isWatch=!0})),o.hooks.failed.tap(n,(function(){i.isWatch=!1,console.log(t.red("failed"))}))):(o.plugin("watchRun",(function(o){i.isWatch=!0})),o.plugin("failed",(function(){i.isWatch=!1,console.log(t.red("failed"))})))},this.apply=function(o){this.initHandler(o),this.printHandler(o)},this.option=Object.assign({},this.option,e)};module.exports=e;
